// _spacing-system.scss

// Base unit for spacing (4px)
// Research shows 4px grid systems create cleaner alignment that's easier to scan
$spacing-unit: 0.25rem; // 4px at 16px base font size

// Spacing scale using powers of 2 for logarithmic visual perception
// This follows Weber-Fechner law on human perception of differences
$spacing-scale: (
    0: 0,
    1: $spacing-unit,
    // 4px
    2: $spacing-unit * 2,
    // 8px
    3: $spacing-unit * 3,
    // 12px
    4: $spacing-unit * 4,
    // 16px
    5: $spacing-unit * 6,
    // 24px
    6: $spacing-unit * 8,
    // 32px
    7: $spacing-unit * 12,
    // 48px
    8: $spacing-unit * 16,
    // 64px
    9: $spacing-unit * 24,
    // 96px
    10: $spacing-unit * 32,
    // 128px
);

// Layout and component constants
$sidebar-width-expanded: 16rem; // 256px
$sidebar-width-collapsed: 4.5rem; // 72px
$header-height: map-get($spacing-scale, 8); // 64px
$content-max-width: 75rem; // 1200px
$table-row-height: map-get($spacing-scale, 6); // 32px
$input-height: map-get($spacing-scale, 7); // 48px
$button-height: map-get($spacing-scale, 6); // 32px

// Border radius scale - logarithmic progression for visual coherence
$border-radius-scale: (
    none: 0,
    sm: 0.125rem,
    // 2px
    md: 0.25rem,
    // 4px
    lg: 0.5rem,
    // 8px
    xl: 0.75rem,
    // 12px
    round: 9999px,
    // Fully rounded (for pills, badges)
);

// Z-index management
$z-index-scale: (
    base: 1,
    dropdown: 10,
    sticky: 20,
    fixed: 30,
    drawer: 40,
    modal: 50,
    popover: 60,
    toast: 70,
    tooltip: 80,
);

// Shadow elevation scale - based on material elevation principles
// Higher values create perception of being further from the surface
$shadow-scale: (
    none: none,
    sm: (0 1px 2px 0 rgba(0, 0, 0, 0.05),
    ),
    md: (0 1px 3px 0 rgba(0, 0, 0, 0.1),
        0 1px 2px -1px rgba(0, 0, 0, 0.1),
    ),
    lg: (0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -2px rgba(0, 0, 0, 0.1),
    ),
    xl: (0 10px 15px -3px rgba(0, 0, 0, 0.1),
        0 4px 6px -4px rgba(0, 0, 0, 0.1),
    ),
    2xl: (0 20px 25px -5px rgba(0, 0, 0, 0.1),
        0 8px 10px -6px rgba(0, 0, 0, 0.1),
    ),
);

// Generate CSS variables for the spacing system
:root {

    // Spacing variables
    @each $key, $value in $spacing-scale {
        --spacing-#{$key}: #{$value};
    }

    // Border radius variables
    @each $key, $value in $border-radius-scale {
        --radius-#{$key}: #{$value};
    }

    // Z-index variables
    @each $key, $value in $z-index-scale {
        --z-#{$key}: #{$value};
    }

    // Shadow variables with dark mode adaptations
    @each $key, $value in $shadow-scale {
        @if $key ==none {
            --shadow-#{$key}: #{$value};
        }

        @else {
            --shadow-#{$key}: #{$value};
        }
    }

    // Layout constants
    --sidebar-width-expanded: #{$sidebar-width-expanded};
    --sidebar-width-collapsed: #{$sidebar-width-collapsed};
    --header-height: #{$header-height};
    --content-max-width: #{$content-max-width};
    --table-row-height: #{$table-row-height};
    --input-height: #{$input-height};
    --button-height: #{$button-height};
}

// Dark mode shadow adjustments
[data-theme="dark"] {
    // Shadows are more subtle in dark mode to prevent harsh contrasts
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.4);
    --shadow-md: 0 1px 3px 0 rgba(0, 0, 0, 0.5), 0 1px 2px -1px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 4px 6px -1px rgba(0, 0, 0, 0.6), 0 2px 4px -2px rgba(0, 0, 0, 0.6);
    --shadow-xl: 0 10px 15px -3px rgba(0, 0, 0, 0.7), 0 4px 6px -4px rgba(0, 0, 0, 0.7);
    --shadow-2xl: 0 20px 25px -5px rgba(0, 0, 0, 0.8), 0 8px 10px -6px rgba(0, 0, 0, 0.8);
}

// Spacing utility classes
// Margin utilities
@each $key, $value in $spacing-scale {
    .m-#{$key} {
        margin: var(--spacing-#{$key});
    }

    .mx-#{$key} {
        margin-left: var(--spacing-#{$key});
        margin-right: var(--spacing-#{$key});
    }

    .my-#{$key} {
        margin-top: var(--spacing-#{$key});
        margin-bottom: var(--spacing-#{$key});
    }

    .mt-#{$key} {
        margin-top: var(--spacing-#{$key});
    }

    .mr-#{$key} {
        margin-right: var(--spacing-#{$key});
    }

    .mb-#{$key} {
        margin-bottom: var(--spacing-#{$key});
    }

    .ml-#{$key} {
        margin-left: var(--spacing-#{$key});
    }
}

// Padding utilities
@each $key, $value in $spacing-scale {
    .p-#{$key} {
        padding: var(--spacing-#{$key});
    }

    .px-#{$key} {
        padding-left: var(--spacing-#{$key});
        padding-right: var(--spacing-#{$key});
    }

    .py-#{$key} {
        padding-top: var(--spacing-#{$key});
        padding-bottom: var(--spacing-#{$key});
    }

    .pt-#{$key} {
        padding-top: var(--spacing-#{$key});
    }

    .pr-#{$key} {
        padding-right: var(--spacing-#{$key});
    }

    .pb-#{$key} {
        padding-bottom: var(--spacing-#{$key});
    }

    .pl-#{$key} {
        padding-left: var(--spacing-#{$key});
    }
}

// Gap utilities (for flex and grid layouts)
@each $key, $value in $spacing-scale {
    .gap-#{$key} {
        gap: var(--spacing-#{$key});
    }

    .gap-x-#{$key} {
        column-gap: var(--spacing-#{$key});
    }

    .gap-y-#{$key} {
        row-gap: var(--spacing-#{$key});
    }
}

// Border radius utilities
@each $key, $value in $border-radius-scale {
    .radius-#{$key} {
        border-radius: var(--radius-#{$key});
    }
}

// Shadow utilities
@each $key, $value in $shadow-scale {
    .shadow-#{$key} {
        box-shadow: var(--shadow-#{$key});
    }
}

// Container utility
.container {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: var(--spacing-4);
    padding-right: var(--spacing-4);
    max-width: var(--content-max-width);
}